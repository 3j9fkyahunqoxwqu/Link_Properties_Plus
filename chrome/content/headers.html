<!DOCTYPE HTML>
<meta charset="utf-8" />
<title>Headers</title>
<link rel="stylesheet" type="text/css" href="chrome://linkpropsplus/skin/headers.css" />
<script type="text/javascript">
document.commandDispatcher = { // Prevent errors from binding for <button type="disclosure">
	__noSuchMethod__: function() {}
};
window.addEventListener("command", function(e) {
	var btn = e.target;
	if(btn.className == "twisty") {
		var show = btn.getAttribute("open") != "true";
		var block = btn.parentNode.nextSibling;
		var display = show ? "" : "none";
		block.style.display = display;
		var skipTestResume = document.body.hasAttribute("hideTestResume");
		if(skipTestResume) {
			var checkTestResume = function(node) {
				return /(?:^|\s)testResume(?:\s|$)/.test(node.className);
			};
			var isTestResume = checkTestResume(block);
		}
		for(var spacer = block.nextSibling; spacer; spacer = spacer.nextSibling) {
			if(skipTestResume && checkTestResume(spacer) != isTestResume)
				continue;
			if(/(?:^|\s)spacer(?:\s|$)/.test(spacer.className)) {
				spacer.style.display = display;
				break;
			}
		}
		btn.setAttribute("open", show);
	}
}, true);
if(!Object.create) { // Firefox 3.6 and older
	// This workaround isn't optimal, but it's better than nothing (especially for too old browsers)
	var updTimer = 0;
	var forceDontCopyHiddenNodes = function() {
		if(!window.getComputedStyle(document.body, null)) { // Frame is hidden
			updTimer = setTimeout(forceDontCopyHiddenNodes, 2000);
			return;
		}
		Array.forEach(document.body.childNodes, function(node) {
			var hide = window.getComputedStyle(node, null).display == "none";
			if(hide == "__childNodes" in node)
				return;
			if(hide) {
				node.__childNodes = Array.slice(node.childNodes);
				node.textContent = "";
			}
			else {
				var df = document.createDocumentFragment();
				node.__childNodes.forEach(function(child) {
					df.appendChild(child);
				});
				delete node.__childNodes;
				node.appendChild(df);
			}
		});
	};
	var updProxy = function() {
		clearTimeout(updTimer);
		updTimer = setTimeout(forceDontCopyHiddenNodes, 50);
	};
	document.addEventListener("DOMNodeInserted", updProxy, false);
	document.addEventListener("DOMAttrModified", updProxy, false);
	window.addEventListener("unload", function destroy(e) {
		window.removeEventListener("unload", destroy, false);
		document.removeEventListener("DOMNodeInserted", updProxy, false);
		document.removeEventListener("DOMAttrModified", updProxy, false);
	}, false);
}
</script>
<body></body>